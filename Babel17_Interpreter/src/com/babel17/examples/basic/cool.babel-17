def a = 10
def b = 12

## a ~ b
match (typeof a) ~ (typeof b)
  case 0 => 
    match a.compare_ b
      case u : int => u
      case e => exception CompareError e
    end
  case _ => exception Unrelated
end

## a OP b
match a ~ b
  case 0 => true
  case _ : int => false
  case (exception Unrelated) => false
end

## a OP b
match a ~ b
  case (u if u OP 0) => true
  case _ : int => false
  case (exception Unrelated) => false
  case _ => exception TypeError
end


